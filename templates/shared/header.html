{% load static %}

<header class="w-full bg-white shadow-sm fixed top-0 left-0 z-50">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3">
    <div class="flex items-center justify-between">
      <!-- Logo -->
      <div class="text-xl sm:text-2xl font-bold text-gray-800 flex-shrink-0">
        <a href="/">WaveLift</a>
      </div>

      <!-- Mobile Menu Button -->
      <button id="nav-toggle" class="md:hidden text-gray-600 focus:outline-none z-50" aria-label="Toggle navigation">
        <svg class="w-6 h-6 transition-transform duration-300" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" class="menu-icon" d="M4 6h16M4 12h16M4 18h16" />
          <path stroke-linecap="round" stroke-linejoin="round" class="close-icon hidden" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>

      <!-- Navigation Links and Search -->
      <div id="nav-menu" class="hidden md:flex md:items-center md:w-auto absolute md:static top-full left-0 w-full bg-white md:bg-transparent border-t md:border-0 border-gray-200 transition-all duration-300 ease-in-out">
        <div class="flex flex-col md:flex-row md:items-center space-y-2 md:space-y-0 md:space-x-6 p-4 md:p-0 text-gray-700 text-sm font-medium">
          <a href="#" class="px-4 py-2 md:p-0 hover:text-black transition-colors duration-200">Home</a>

          <!-- Categories Dropdown -->
          <div class="relative group">
            <button id="categories-btn" class="flex items-center px-4 py-2 md:p-0 hover:text-black transition-colors duration-200">
              Categories
              <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
              </svg>
            </button>
            <div id="categories-menu" class="hidden group-hover:block absolute md:top-full md:left-0 w-48 bg-white border rounded-lg shadow-lg py-2 z-40 transition-opacity duration-200">
              <a href="#" class="block px-4 py-2 text-sm hover:bg-gray-100">Headphones</a>
              <a href="#" class="block px-4 py-2 text-sm hover:bg-gray-100">Speakers</a>
              <a href="#" class="block px-4 py-2 text-sm hover:bg-gray-100">Accessories</a>
            </div>
          </div>

          <a href="#" class="px-4 py-2 md:p-0 hover:text-black transition-colors duration-200">About Us</a>
          <a href="#" class="px-4 py-2 md:p-0 hover:text-black transition-colors duration-200">Contact Us</a>

          <!-- More Dropdown -->
          <div class="relative group">
            <button id="more-btn" class="flex items-center px-4 py-2 md:p-0 hover:text-black transition-colors duration-200">
              More
              <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
              </svg>
            </button>
            <div id="more-menu" class="hidden group-hover:block absolute md:top-full md:left-0 w-48 bg-white border rounded-lg shadow-lg py-2 z-40 transition-opacity duration-200">
              <a href="#" class="block px-4 py-2 text-sm hover:bg-gray-100">Blog</a>
              <a href="#" class="block px-4 py-2 text-sm hover:bg-gray-100">Support</a>
              <a href="#" class="block px-4 py-2 text-sm hover:bg-gray-100">Careers</a>
            </div>
          </div>

          <!-- Search & Icons (Mobile) -->
          <div class="flex flex-col md:hidden space-y-2 pt-2">
            <div class="flex items-center bg-gray-100 px-2 py-1 rounded-md text-sm text-gray-500 w-full">
              <input type="search" placeholder="Search..." required
                class="w-full bg-transparent p-1 text-sm focus:outline-none" />
              <svg fill="#000000" height="15px" viewBox="0 0 488.4 488.4" class="ml-1 flex-shrink-0">
                <path
                  d="M0,203.25c0,112.1,91.2,203.2,203.2,203.2c51.6,0,98.8-19.4,134.7-51.2l129.5,129.5c4.8,4.8,12.5,4.8,17.3,0 s4.8-12.5,0-17.3l-129.6-129.5c31.8-35.9,51.2-83,51.2-134.7c0-112.1-91.2-203.2-203.2-203.2S0,91.15,0,203.25z M381.9,203.25 c0,98.5-80.2,178.7-178.7,178.7S24.5,301.75,24.5,203.25S104.7,24.55,203.2,24.55S381.9,104.65,381.9,203.25z">
                </path>
              </svg>
            </div>
            <div class="flex items-center gap-4">
              <img src="{% static 'images/favorite.svg' %}" alt="Favorites" class="w-5 h-5" />
              <img src="{% static 'images/account.svg' %}" alt="Account" class="w-5 h-5" />
              <img src="{% static 'images/cart.svg' %}" alt="Cart" class="w-5 h-5" />
            </div>
          </div>
        </div>
      </div>

      <!-- Search & Icons (Desktop) -->
      <div class="hidden md:flex items-center gap-2 lg:gap-4 flex-shrink-0">
        <div class="flex items-center bg-gray-100 px-2 py-1 rounded-md text-sm text-gray-500 w-32 sm:w-40 lg:w-48">
          <input type="search" placeholder="Search..." required
            class="w-full bg-transparent p-1 text-sm focus:outline-none" />
          <svg fill="#000000" height="15px" viewBox="0 0 488.4 488.4" class="ml-1 flex-shrink-0">
            <path
              d="M0,203.25c0,112.1,91.2,203.2,203.2,203.2c51.6,0,98.8-19.4,134.7-51.2l129.5,129.5c4.8,4.8,12.5,4.8,17.3,0 s4.8-12.5,0-17.3l-129.6-129.5c31.8-35.9,51.2-83,51.2-134.7c0-112.1-91.2-203.2-203.2-203.2S0,91.15,0,203.25z M381.9,203.25 c0,98.5-80.2,178.7-178.7,178.7S24.5,301.75,24.5,203.25S104.7,24.55,203.2,24.55S381.9,104.65,381.9,203.25z">
            </path>
          </svg>
        </div>
        <img src="{% static 'images/favorite.svg' %}" alt="Favorites" class="w-5 h-5 lg:w-6 lg:h-6" />
        <img src="{% static 'images/account.svg' %}" alt="Account" class="w-5 h-5 lg:w-6 lg:h-6" />
        <img src="{% static 'images/cart.svg' %}" alt="Cart" class="w-5 h-5 lg:w-6 lg:h-6" />
      </div>
    </div>
  </div>
</header>

<!-- JavaScript for Navigation -->
<script>
  const navToggle = document.getElementById('nav-toggle');
  const navMenu = document.getElementById('nav-menu');
  const menuIcon = navToggle.querySelector('.menu-icon');
  const closeIcon = navToggle.querySelector('.close-icon');

  navToggle.addEventListener('click', () => {
    navMenu.classList.toggle('hidden');
    menuIcon.classList.toggle('hidden');
    closeIcon.classList.toggle('hidden');
  });

  // Close mobile menu when clicking outside
  document.addEventListener('click', (e) => {
    if (!navMenu.contains(e.target) && !navToggle.contains(e.target)) {
      navMenu.classList.add('hidden');
      menuIcon.classList.remove('hidden');
      closeIcon.classList.add('hidden');
    }
  });

  // Handle window resize to ensure proper menu state
  window.addEventListener('resize', () => {
    if (window.innerWidth >= 768) {
      navMenu.classList.remove('hidden');
      menuIcon.classList.remove('hidden');
      closeIcon.classList.add('hidden');
    } else {
      navMenu.classList.add('hidden');
    }
  });

  // Handle dropdowns for mobile
  const categoriesBtn = document.getElementById('categories-btn');
  const categoriesMenu = document.getElementById('categories-menu');
  const moreBtn = document.getElementById('more-btn');
  const moreMenu = document.getElementById('more-menu');

  categoriesBtn.addEventListener('click', (e) => {
    if (window.innerWidth < 768) {
      e.preventDefault();
      categoriesMenu.classList.toggle('hidden');
      moreMenu.classList.add('hidden');
    }
  });

  moreBtn.addEventListener('click', (e) => {
    if (window.innerWidth < 768) {
      e.preventDefault();
      moreMenu.classList.toggle('hidden');
      categoriesMenu.classList.add('hidden');
    }
  });
</script>